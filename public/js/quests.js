var quests={init:function(){quests.events(),quests.decipher_hash(),quests.search()},decipher_hash:function(){var a=document.location.hash;return""==a?!1:(a=a.slice(1).split("|"),$("#class-selector").multiselect("deselect","CRP").multiselect("select",a[0].split(",")),$("#min-level").val(a[1]),$("#max-level").val(a[2]),$("#quest_item").val(a[3]),!0)},events:function(){$("#class-selector").multiselect({buttonClass:"btn",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,includeSelectAllOption:!0,buttonText:function(a){if(0==a.length)return'None selected <b class="caret"></b>';if(1==a.length)return'<img src="/img/classes/'+$(a[0]).val()+'.png"> <b class="caret"></b>';if(a.length>1)return a.length+' selected  <b class="caret"></b>';var b="";return a.each(function(){b+=$(this).text()+", "}),b.substr(0,b.length-2)+' <b class="caret"></b>'}}),$(".quest-form").submit(function(a){a.preventDefault(),quests.search()}),$(".quest-form .filter-form").click(function(a){a.preventDefault(),$(".quest-form").submit()}),$(".quest-text-search").keyup(function(a){13==a.which&&quests.search()})},search:function(){var a=[],b=parseInt($("#min-level").val()),c=parseInt($("#max-level").val()),d=$("#quest_item").val().toLowerCase();$("#class-selector + .btn-group input:checked").each(function(){a[a.length]=$(this).val()}),document.location.hash=[a.join(","),b,c,d].join("|"),$("tr.quest").each(function(){var e=$(this),f=$("td span.name",e).html().toLowerCase(),g=parseInt($("td span.level",e).html()),h=$("td img.class-icon",e).data("abbr"),i=!0;""!=d&&f.indexOf(d)<0&&(i=!1);for(var j=!1,k=0;k<a.length;k++)if(a[k]==h){j=!0;break}0==j&&(i=!1),(b>g||g>c)&&(i=!1),e[(i?"remove":"add")+"Class"]("hidden")})}};$(quests.init);