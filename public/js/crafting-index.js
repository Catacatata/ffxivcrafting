var craftingIndex={init:function(){$(".bootswitch").bootstrapSwitch(),craftingIndex.ilvl_events(),craftingIndex.class_selection_events(),craftingIndex.inclusions()},inclusions:function(){$(".inclusions-list .label").click(function(){$(this).toggleClass("label-default").toggleClass("opaque").toggleClass("label-primary");var a=[];$(".inclusions-list .label-primary").each(function(){a.push($(this).data("ids"))}),$("#inclusions").val(a.join(",")),localStorage.setItem("config:crafting-index-inclusions",$(".inclusions-list .label-primary").map(function(){return $(this).index()}).get().join())});var a=localStorage.getItem("config:crafting-index-inclusions");if(null!=a&&""!=a){a=a.split(",");for(var b=0;b<a.length;b++)$($(".inclusions-list span")[a[b]]).trigger("click")}},ilvl_events:function(){$("#account-ilvl").click(function(a){a.preventDefault();var b=null,c=null;$(".class-selector.active").each(function(){var a=$(this),d=a.data("level"),e=5*Math.ceil(d/5),f=e-4;(b>f||null==b)&&(b=f),(e>c||null==c)&&(c=e)}),$("#recipe-level-start").val($("#start"+b).data("start")),$("#recipe-level-end").val($("#end"+c).data("end"))}),$("#ilvl-modal .select-range").click(function(a){a.preventDefault();var b=$(this),c=b.closest(".modal"),d=b.closest("tr"),e=d.find("[name=start]").data("start"),f=d.find("[name=end]").data("end");c.modal("hide"),$("#recipe-level-start").val(e),$("#recipe-level-end").val(f)}),$("#ilvl-modal input[type=radio]").change(function(){var a=$(this),b=a.attr("name"),c="start"==b?"end":"start",d="#ilvl-modal input[type=radio][name="+b+"]",e="#ilvl-modal input[type=radio][name="+c+"]",f=$(d).index(a),g=$(e).index($(e+":checked")[0]);("start"==b&&f>g||"end"==b&&g>f)&&$($(e)[f]).prop("checked",!0)}),$("#ilvl-modal .choose").click(function(a){a.preventDefault();var b=$(this).closest(".modal"),c=$("#ilvl-modal input[type=radio][name=start]:checked").data("start"),d=$("#ilvl-modal input[type=radio][name=end]:checked").data("end");b.modal("hide"),$("#recipe-level-start").val(c),$("#recipe-level-end").val(d)})},class_selection_events:function(){$(".class-selector").click(function(a){a.stopPropagation(),a.preventDefault();{var b=a.metaKey||a.ctrlKey,c=$(this);c.find("input:checkbox")}if(b){var d=$(".jobs-list input:checkbox:checked").length;c.hasClass("active")&&d>1?c.removeClass("active"):c.hasClass("active")||c.addClass("active")}else $(".jobs-list .class-selector").removeClass("active"),c.addClass("active");$(".jobs-list input:checkbox").each(function(){var a=$(this),b=a.closest(".class-selector").hasClass("active");a.prop("checked",b)}),$(".jobs-list img").each(function(){var a=$(this),b=a.closest(".class-selector").hasClass("active");a.toggleClass("selected",b).attr("src",a.data((b?"active":"original")+"Src"))})}),$(".jobs-list img").each(function(){$(this).data("originalSrc",$(this).attr("src"))}),1==$(".class-selector.select-me").length?$(".class-selector.select-me").first().trigger("click"):$(".class-selector").first().trigger("click")}};$(craftingIndex.init);