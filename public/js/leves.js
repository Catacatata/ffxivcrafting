var leves={init:function(){$("#class-selector").multiselect({buttonClass:"btn",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,includeSelectAllOption:!0,buttonText:function(a){if(0==a.length)return'None selected <b class="caret"></b>';if(1==a.length)return'<img src="/img/classes/'+$(a[0]).val()+'.png"> <b class="caret"></b>';if(a.length>1)return a.length+' selected  <b class="caret"></b>';var b="";return a.each(function(){b+=$(this).text()+", "}),b.substr(0,b.length-2)+' <b class="caret"></b>'}}),$("#type-selector").multiselect({buttonClass:"btn",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,includeSelectAllOption:!0,buttonText:function(a){if(0==a.length)return'None selected <b class="caret"></b>';if(a.length>1)return a.length+' selected  <b class="caret"></b>';var b="";return a.each(function(){b+=$(this).text()+", "}),b.substr(0,b.length-2)+' <b class="caret"></b>'}}),$(".leve-form").submit(function(a){a.preventDefault(),leves.search()}),$(".leve-form .filter-form").click(function(a){a.preventDefault(),$(".leve-form").submit()}),$(".toggle-advanced").click(function(a){a.preventDefault(),$(".advanced").toggleClass("hidden"),$(".advanced input").val("")}),$(".leve-text-search").keyup(function(a){13==a.which&&leves.search()}),leves.search()},search:function(){var a=[],b=[],c=$("#triple_only").is(":checked"),d=parseInt($("#min-level").val()),e=parseInt($("#max-level").val()),f=$("#leve_item").val(),g=$("#leve_name").val(),h=$("#leve_location").val();$("#class-selector + .btn-group input:checked").each(function(){a[a.length]=$(this).val()}),$("#type-selector + .btn-group input:checked").each(function(){b[b.length]=$(this).val()}),$(".leve_rewards").popover("destroy"),$.ajax({url:"/leve",type:"post",dataType:"html",data:{classes:a,types:b,triple_only:c,min_level:d,max_level:e,leve_item:f,leve_name:g,leve_location:h},beforeStart:function(){global.noty({type:"info",text:"Searching for Leves"})},success:function(a){$(".leve-table tbody").html(a),"undefined"!=typeof initXIVDBTooltips&&initXIVDBTooltips(),global.reset_popovers(),$("[rel=tooltip]").tooltip()}})}};$(leves.init);